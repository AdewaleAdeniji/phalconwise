<!DOCTYPE html>
<html lang="en">
  
    <head>
        <meta charset="utf-8">
        <title>Regiser on Phalconwise</title>
        <meta http-equiv="X-UA-Compatible" content="IE=Edge">
        <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
        <meta http-equiv="content-language" content="en">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
        <meta name="format-detection" content="telephone=no">
        <link rel="apple-touch-icon" sizes="180x180" href="img/logos/logo2.png">
        <link rel="icon" type="image/png" sizes="32x32" href="img/logos/logo2.png">
        <link rel="icon" type="image/png" sizes="16x16" href="img/logos/logo2.png">
        <link rel="manifest" href="img/site.html">
        <link rel="mask-icon" href="img/safari-pinned-tab.svg" color="#5bbad5">
        <meta name="msapplication-TileColor" content="#da532c">
        <meta name="theme-color" content="#ffffff">
        <meta name="description" content="Payments made easier and faster by Phalconwise!">
        <meta name="twitter:card" content="summary">
        <meta name="twitter:site" content="@ui8">
        <meta name="twitter:title" content="Unity">
        <meta name="twitter:description" content="Payments made easier and faster by Phalconwise!">
        <meta name="twitter:creator" content="@ui8">
        <meta name="twitter:image" content="img/twitter-card.jpg">
        <meta property="og:title" content="Unity">
        <meta property="og:type" content="Article">
        <meta property="og:url" content="index.html">
        <meta property="og:image" content="img/fb-og-image.jpg">
        <meta property="og:description" content="Payments made easier and faster by Phalconwise!">
        <meta property="og:site_name" content="Phalconwise">
        <meta property="fb:admins" content="132951670226590">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;family=Poppins:ital,wght@0,500;1,500&amp;display=swap" rel="stylesheet">
        <link rel="stylesheet" media="all" href="css/app.css">
        <link rel="stylesheet" media="all" href="css/style.css">
    <script>var viewportmeta = document.querySelector('meta[name="viewport"]');
if (viewportmeta) {
  if (screen.width < 375) {
    var newScale = screen.width / 375;
    viewportmeta.content = 'width=375, minimum-scale=' + newScale + ', maximum-scale=1.0, user-scalable=no, initial-scale=' + newScale + '';
  } else {
    viewportmeta.content = 'width=device-width, maximum-scale=1.0, initial-scale=1.0';
  }
}</script>
  </head>
  <body class="loginedit">
    <script>
        // console.log(localStorage.getItem('darkMode'));
if (localStorage.getItem('darkMode') === "on") {
		document.body.classList.add("dark");
		document.addEventListener("DOMContentLoaded", function() {
		  document.querySelector('.js-switch-theme input').checked = true;
		});
}
</script>
  
    <div class="popup" id="popup-settings">
      <form class="popup__form loginform" id="loginform">
        <div class="popup__title h6 home">
            <img class="imglogologin" src="img/logos/logo2.png" alt="">
            Phalconwise
            </div>
            
        <div class="popup__user">
          <div class="popup__category caption-sm">Regsiter a Phalconwise Account</div>
          <div class="popup__line">
            <div class="popup__ava">
            <img class="popup__pic mobile-hide" src="img/ava.png" alt=""></div>
          </div>
          <div class="popup__details">
            <div class="popup__text">
                Join the league of people making payments swiftly.
            </div>
            </div>
        </div>
        <div class="popup__fieldset">

            <div class="popup__field field">
              <div class="field__label">Your Email Address</div>
              <div class="field__wrap"><input class="field__input" type="email" id="emailaddress" required autofocus></div>
              <div class="field__label">An email verification code would be sent to this email, Please ensure you have access to the mailbox</div>
            </div>

            
            <div class="popup__field field">
              <div class="field__label">Create a Password</div>
              <div class="field__wrap"><input class="field__input" type="password" id="password" minlength="8" required></div>
              <div class="field__label">Password must be up to eight(8) characters and contain at least one(1) alphanumeric character e.g @,#,$,% etc.</div>
            </div>
          

         
        </div>
        
        <div class="popup__row errorlabel">
            <div class="field__label errorlabel" id="info"></div>
        </div>
        <div class="popup__row">
            <div class="field__wrap">
                <button class="popup__btn btn btn_black" id="loginbtn" type="submit">Signup</button>
            </div>
        </div>
      </form>
      
      <form class="popup__form verifyform" id="verifyform">
        <div class="popup__title h6 home">
            <img class="imglogologin" src="img/logos/logo2.png" alt="">
            Phalconwise</div>
        <div class="popup__user">
          <div class="popup__category caption-sm">Register a Phalconwise Account</div>
          <div class="popup__line">
            <div class="popup__ava">
            <img class="popup__pic" src="img/ava.png" alt=""></div>
          </div>
          <div class="popup__details">
            <div class="popup__text">
                Verify your email address
            </div>
            </div>
        </div>
        <div class="popup__fieldset">
            <div class="popup__field field">
                <div class="field__label">Verification code</div>
                <div class="field__wrap"><input class="field__input" type="password" id="vcode" maxlength="6" minlength="6" required autofocus></div>
                <div class="field__label">A verification code was sent to your email address, If you didn't receive any email, you can request another email using the button below or better still if you made an error in your email, you can change your email too</div>
            </div>
            <div class="popup__row errorlabel">
            <div class="field__label errorlabel" id="infoverify"></div>
        </div>
            <div class="popup__row">
                <div class="popup__tags">
                    <a class="popup__tag active resendcode" href="#">Resend Verification Code</a>
                    <a class="popup__tag active changemail" href="#">Change my email</a>
                    
                </div>
            </div>
            <div class="popup__row">
            <div class="field__wrap">
                <button class="popup__btn btn btn_black" id="verifybtn" type="submit">Verify Email</button>
            </div>
        </div>
     </form>
     
     </div>
     <div class="popup__tags align-right float-right">
         Already have an account? <a class="popup__tag active" href="login">Login</a>
      </div>
    </div><!-- scripts-->
    <script src="js/lib/jquery.min.js"></script>
    <script src="js/lib/owl.carousel.min.js"></script>
    <script src="js/lib/svg4everybody.min.js"></script>
    <script src="js/lib/apexcharts.min.js"></script>
    <script src="js/lib/jquery.magnific-popup.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/index.js"></script>
    <script type="text/javascript">
        hide('verifyform');
        var email = '';
        var password = '';
        $('.loginform').submit(function(e){
            e.preventDefault();
            email = value('emailaddress');
            password = value('password');

            if(emailval(email)){
                var data = JSON.stringify({email:email,password:password});
                inform('Loading...');
                get('loginbtn').disabled=true;
                httpPost('/auth/register',data)
                .then(response=>response.json())
                .then((data)=>{
                  get('loginbtn').disabled=false;
                    if(data.code==200){
                      
                      inform(data.text);
                      Swal.fire({
                        icon:'info',
                        text:data.text,
                        allowOutsideClick:true,
                        showConfirmButton:true,
                        confirmButtonText:'Okay!, I\ll check for the code',
                        showCloseButton:true,
                        timer:15000
                      })
                      .then((data)=>{
                        show('verifyform');
                        hide('loginform');
                        inform('');
                        get('infoverify').innerHTML= '';
                      })
                      //show verification screen
                      
                    }
                    else if(data.code==205){
                        inform(data.text);
                      Swal.fire({
                        icon:'info',
                        text:data.text,
                        allowOutsideClick:true,
                        showConfirmButton:true,
                        confirmButtonText:'Okay!, I\ll check for the code',
                        showCloseButton:true,
                        timer:15000
                      })
                      .then((data)=>{
                        show('verifyform');
                        hide('loginform');
                      })
                    }
                    else {
                      inform(data.text);
                    }
                })
                .catch((err)=>{
                    console.log(err);
                    inform('Error Occured while processing your request');
                })

            }
            else {
                inform('Email Address invalid');
            }

        })
        function inform(message){
            get('loginbtn').disabled=false;
            get('infoverify').innerHTML = '';
            get('info').innerHTML = message;
        }
        $('.changemail').click(function(){
            hide('verifyform');
            show('loginform');
            inform('');
        })
        $('.resendcode').click(function(){
            get('infoverify').innerHTML='Resending Verification Code....';
                var data = JSON.stringify({email:email});
                
                httpPost('/auth/resendcode',data)
                .then(response=>response.json())
                .then((data)=>{
                  
                    if(data.code==200){
                        get('infoverify').innerHTML=data.text;
                    }
                    else {
                      inform(data.text);
                    }
                })
                .catch((err)=>{
                    console.log(err);
                    get('infoverify').innerHTML='Error Occured while processing your request';
                })
        })
        $('.verifyform').submit(function(e){
            e.preventDefault();
            var code = value('vcode');
            if(code.length==6){
                var data = JSON.stringify({email:email,code:code});
                get('infoverify').innerHTML='Verifying...';
                httpPost('/auth/confirmcode',data)
                .then(response=>response.json())
                .then((data)=>{
                  
                    if(data.code==200){
                    var token = data.text.token;
                    //   inform(data.text.message);
                    setUserToken(token);
                      Swal.fire({
                        icon:'success',
                        text:data.text.message,
                        footer:'Redirecting.....',
                        allowOutsideClick:false,
                        showConfirmButton:false,
                        timer:3000
                      })
                      .then((data)=>{
                          redirectTo('onboard');

                      })
                    }
                    else {
                        get('infoverify').innerHTML=data.text;
                    }
                })
                .catch((err)=>{
                    console.log(err);
                    get('infoverify').innerHTML='Error Occured while processing your request';
                })
            }
            else {
                get('infoverify').innerHTML='Invalid Code';   
            }
        })
    </script>
  </body>


</html>

